exports.id=779,exports.ids=[779],exports.modules={3011:e=>{"use strict";function t(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}function n(e){return t(e,2)}function r(r,o){"string"!=typeof r&&(o=r,r=e.exports.ISO8601_FORMAT),o||(o=e.exports.now());var i,s,c,a,l=n(o.getDate()),u=n(o.getMonth()+1),f=n(o.getFullYear()),p=n(f.substring(2,4)),d=r.indexOf("yyyy")>-1?f:p,h=n(o.getHours()),y=n(o.getMinutes()),m=n(o.getSeconds()),g=t(o.getMilliseconds(),3),S=(i=o.getTimezoneOffset(),s=Math.abs(i),c=String(Math.floor(s/60)),a=String(s%60),c=("0"+c).slice(-2),a=("0"+a).slice(-2),0===i?"Z":(i<0?"+":"-")+c+":"+a);return r.replace(/dd/g,l).replace(/MM/g,u).replace(/y{1,4}/g,d).replace(/hh/g,h).replace(/mm/g,y).replace(/ss/g,m).replace(/SSS/g,g).replace(/O/g,S)}function o(e,t,n,r){e["set"+(r?"":"UTC")+t](n)}e.exports=r,e.exports.asString=r,e.exports.parse=function(t,n,r){if(!t)throw new Error("pattern must be supplied");return function(t,n,r){var i=t.indexOf("O")<0,s=!1,c=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(e,t){o(e,"FullYear",t,i)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(e,t){o(e,"Month",t-1,i),e.getMonth()!==t-1&&(s=!0)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(e,t){s&&o(e,"Month",e.getMonth()-1,i),o(e,"Date",t,i)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(e,t){o(e,"Hours",t,i)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(e,t){o(e,"Minutes",t,i)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(e,t){o(e,"Seconds",t,i)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(e,t){o(e,"Milliseconds",t,i)}},{pattern:/O/,regexp:"[+-]\\d{1,2}:?\\d{2}?|Z",fn:function(e,t){t="Z"===t?0:t.replace(":","");var n=Math.abs(t),r=(t>0?-1:1)*(n%100+60*Math.floor(n/100));e.setUTCMinutes(e.getUTCMinutes()+r)}}],a=c.reduce((function(e,t){return t.pattern.test(e.regexp)?(t.index=e.regexp.match(t.pattern).index,e.regexp=e.regexp.replace(t.pattern,"("+t.regexp+")")):t.index=-1,e}),{regexp:t,index:[]}),l=c.filter((function(e){return e.index>-1}));l.sort((function(e,t){return e.index-t.index}));var u=new RegExp(a.regexp).exec(n);if(u){var f=r||e.exports.now();return l.forEach((function(e,t){e.fn(f,u[t+1])})),f}throw new Error("String '"+n+"' could not be parsed as '"+t+"'")}(t,n,r)},e.exports.now=function(){return new Date},e.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS",e.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO",e.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",e.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"},174:(e,t,n)=>{"use strict";const r=n(3735),o=n(6928),i=n(3798).mkdirsSync,s=n(7211).utimesMillisSync,c=n(6462);function a(e,t,n,i){if(!i.filter||i.filter(t,n))return function(e,t,n,i){const s=(i.dereference?r.statSync:r.lstatSync)(t);return s.isDirectory()?function(e,t,n,o,i){if(!t)return function(e,t,n,o){return r.mkdirSync(n),u(t,n,o),r.chmodSync(n,e.mode)}(e,n,o,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${o}' with directory '${n}'.`);return u(n,o,i)}(s,e,t,n,i):s.isFile()||s.isCharacterDevice()||s.isBlockDevice()?function(e,t,n,o,i){return t?function(e,t,n,o){if(o.overwrite)return r.unlinkSync(n),l(e,t,n,o);if(o.errorOnExist)throw new Error(`'${n}' already exists`)}(e,n,o,i):l(e,n,o,i)}(s,e,t,n,i):s.isSymbolicLink()?function(e,t,n,i){let s=r.readlinkSync(t);if(i.dereference&&(s=o.resolve(process.cwd(),s)),e){let e;try{e=r.readlinkSync(n)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return r.symlinkSync(s,n);throw e}if(i.dereference&&(e=o.resolve(process.cwd(),e)),c.isSrcSubdir(s,e))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${e}'.`);if(r.statSync(n).isDirectory()&&c.isSrcSubdir(e,s))throw new Error(`Cannot overwrite '${e}' with '${s}'.`);return function(e,t){return r.unlinkSync(t),r.symlinkSync(e,t)}(s,n)}return r.symlinkSync(s,n)}(e,t,n,i):void 0}(e,t,n,i)}function l(e,t,o,i){return"function"==typeof r.copyFileSync?(r.copyFileSync(t,o),r.chmodSync(o,e.mode),i.preserveTimestamps?s(o,e.atime,e.mtime):void 0):function(e,t,o,i){const s=n(1054)(65536),c=r.openSync(t,"r"),a=r.openSync(o,"w",e.mode);let l=0;for(;l<e.size;){const e=r.readSync(c,s,0,65536,l);r.writeSync(a,s,0,e),l+=e}i.preserveTimestamps&&r.futimesSync(a,e.atime,e.mtime),r.closeSync(c),r.closeSync(a)}(e,t,o,i)}function u(e,t,n){r.readdirSync(e).forEach((r=>function(e,t,n,r){const i=o.join(t,e),s=o.join(n,e),{destStat:l}=c.checkPathsSync(i,s,"copy");return a(l,i,s,r)}(r,e,t,n)))}e.exports=function(e,t,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:s,destStat:l}=c.checkPathsSync(e,t,"copy");return c.checkParentPathsSync(e,s,t,"copy"),function(e,t,n,s){if(s.filter&&!s.filter(t,n))return;const c=o.dirname(n);return r.existsSync(c)||i(c),a(e,t,n,s)}(l,e,t,n)}},1881:(e,t,n)=>{"use strict";e.exports={copySync:n(174)}},4994:(e,t,n)=>{"use strict";const r=n(3735),o=n(6928),i=n(3798).mkdirs,s=n(9288).pathExists,c=n(7211).utimesMillis,a=n(6462);function l(e,t,n,r,c){const a=o.dirname(n);s(a,((o,s)=>o?c(o):s?f(e,t,n,r,c):void i(a,(o=>o?c(o):f(e,t,n,r,c)))))}function u(e,t,n,r,o,i){Promise.resolve(o.filter(n,r)).then((s=>s?e(t,n,r,o,i):i()),(e=>i(e)))}function f(e,t,n,r,o){return r.filter?u(p,e,t,n,r,o):p(e,t,n,r,o)}function p(e,t,n,i,s){(i.dereference?r.stat:r.lstat)(t,((c,l)=>c?s(c):l.isDirectory()?function(e,t,n,o,i,s){return t?t&&!t.isDirectory()?s(new Error(`Cannot overwrite non-directory '${o}' with directory '${n}'.`)):y(n,o,i,s):function(e,t,n,o,i){r.mkdir(n,(s=>{if(s)return i(s);y(t,n,o,(t=>t?i(t):r.chmod(n,e.mode,i)))}))}(e,n,o,i,s)}(l,e,t,n,i,s):l.isFile()||l.isCharacterDevice()||l.isBlockDevice()?function(e,t,n,o,i,s){return t?function(e,t,n,o,i){if(!o.overwrite)return o.errorOnExist?i(new Error(`'${n}' already exists`)):i();r.unlink(n,(r=>r?i(r):d(e,t,n,o,i)))}(e,n,o,i,s):d(e,n,o,i,s)}(l,e,t,n,i,s):l.isSymbolicLink()?function(e,t,n,i,s){r.readlink(t,((t,c)=>t?s(t):(i.dereference&&(c=o.resolve(process.cwd(),c)),e?void r.readlink(n,((t,l)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?r.symlink(c,n,s):s(t):(i.dereference&&(l=o.resolve(process.cwd(),l)),a.isSrcSubdir(c,l)?s(new Error(`Cannot copy '${c}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&a.isSrcSubdir(l,c)?s(new Error(`Cannot overwrite '${l}' with '${c}'.`)):function(e,t,n){r.unlink(t,(o=>o?n(o):r.symlink(e,t,n)))}(c,n,s)))):r.symlink(c,n,s))))}(e,t,n,i,s):void 0))}function d(e,t,n,o,i){return"function"==typeof r.copyFile?r.copyFile(t,n,(t=>t?i(t):h(e,n,o,i))):function(e,t,n,o,i){const s=r.createReadStream(t);s.on("error",(e=>i(e))).once("open",(()=>{const t=r.createWriteStream(n,{mode:e.mode});t.on("error",(e=>i(e))).on("open",(()=>s.pipe(t))).once("close",(()=>h(e,n,o,i)))}))}(e,t,n,o,i)}function h(e,t,n,o){r.chmod(t,e.mode,(r=>r?o(r):n.preserveTimestamps?c(t,e.atime,e.mtime,o):o()))}function y(e,t,n,o){r.readdir(e,((r,i)=>r?o(r):m(i,e,t,n,o)))}function m(e,t,n,r,i){const s=e.pop();return s?function(e,t,n,r,i,s){const c=o.join(n,t),l=o.join(r,t);a.checkPaths(c,l,"copy",((t,o)=>{if(t)return s(t);const{destStat:a}=o;f(a,c,l,i,(t=>t?s(t):m(e,n,r,i,s)))}))}(e,s,t,n,r,i):i()}e.exports=function(e,t,n,r){"function"!=typeof n||r?"function"==typeof n&&(n={filter:n}):(r=n,n={}),r=r||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),a.checkPaths(e,t,"copy",((o,i)=>{if(o)return r(o);const{srcStat:s,destStat:c}=i;a.checkParentPaths(e,s,t,"copy",(o=>o?r(o):n.filter?u(l,c,e,t,n,r):l(c,e,t,n,r)))}))}},4423:(e,t,n)=>{"use strict";const r=n(1236).S;e.exports={copy:r(n(4994))}},2591:(e,t,n)=>{"use strict";const r=n(1236).S,o=n(3735),i=n(6928),s=n(3798),c=n(5422),a=r((function(e,t){t=t||function(){},o.readdir(e,((n,r)=>{if(n)return s.mkdirs(e,t);r=r.map((t=>i.join(e,t))),function e(){const n=r.pop();if(!n)return t();c.remove(n,(n=>{if(n)return t(n);e()}))}()}))}));function l(e){let t;try{t=o.readdirSync(e)}catch(t){return s.mkdirsSync(e)}t.forEach((t=>{t=i.join(e,t),c.removeSync(t)}))}e.exports={emptyDirSync:l,emptydirSync:l,emptyDir:a,emptydir:a}},9616:(e,t,n)=>{"use strict";const r=n(1236).S,o=n(6928),i=n(3735),s=n(3798),c=n(9288).pathExists;e.exports={createFile:r((function(e,t){function n(){i.writeFile(e,"",(e=>{if(e)return t(e);t()}))}i.stat(e,((r,i)=>{if(!r&&i.isFile())return t();const a=o.dirname(e);c(a,((e,r)=>e?t(e):r?n():void s.mkdirs(a,(e=>{if(e)return t(e);n()}))))}))})),createFileSync:function(e){let t;try{t=i.statSync(e)}catch(e){}if(t&&t.isFile())return;const n=o.dirname(e);i.existsSync(n)||s.mkdirsSync(n),i.writeFileSync(e,"")}}},6288:(e,t,n)=>{"use strict";const r=n(9616),o=n(1522),i=n(5291);e.exports={createFile:r.createFile,createFileSync:r.createFileSync,ensureFile:r.createFile,ensureFileSync:r.createFileSync,createLink:o.createLink,createLinkSync:o.createLinkSync,ensureLink:o.createLink,ensureLinkSync:o.createLinkSync,createSymlink:i.createSymlink,createSymlinkSync:i.createSymlinkSync,ensureSymlink:i.createSymlink,ensureSymlinkSync:i.createSymlinkSync}},1522:(e,t,n)=>{"use strict";const r=n(1236).S,o=n(6928),i=n(3735),s=n(3798),c=n(9288).pathExists;e.exports={createLink:r((function(e,t,n){function r(e,t){i.link(e,t,(e=>{if(e)return n(e);n(null)}))}c(t,((a,l)=>a?n(a):l?n(null):void i.lstat(e,(i=>{if(i)return i.message=i.message.replace("lstat","ensureLink"),n(i);const a=o.dirname(t);c(a,((o,i)=>o?n(o):i?r(e,t):void s.mkdirs(a,(o=>{if(o)return n(o);r(e,t)}))))}))))})),createLinkSync:function(e,t){if(i.existsSync(t))return;try{i.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const n=o.dirname(t);return i.existsSync(n)||s.mkdirsSync(n),i.linkSync(e,t)}}},3838:(e,t,n)=>{"use strict";const r=n(6928),o=n(3735),i=n(9288).pathExists;e.exports={symlinkPaths:function(e,t,n){if(r.isAbsolute(e))return o.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:e})));{const s=r.dirname(t),c=r.join(s,e);return i(c,((t,i)=>t?n(t):i?n(null,{toCwd:c,toDst:e}):o.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:r.relative(s,e)})))))}},symlinkPathsSync:function(e,t){let n;if(r.isAbsolute(e)){if(n=o.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const i=r.dirname(t),s=r.join(i,e);if(n=o.existsSync(s),n)return{toCwd:s,toDst:e};if(n=o.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:r.relative(i,e)}}}}},7064:(e,t,n)=>{"use strict";const r=n(3735);e.exports={symlinkType:function(e,t,n){if(n="function"==typeof t?t:n,t="function"!=typeof t&&t)return n(null,t);r.lstat(e,((e,r)=>{if(e)return n(null,"file");t=r&&r.isDirectory()?"dir":"file",n(null,t)}))},symlinkTypeSync:function(e,t){let n;if(t)return t;try{n=r.lstatSync(e)}catch(e){return"file"}return n&&n.isDirectory()?"dir":"file"}}},5291:(e,t,n)=>{"use strict";const r=n(1236).S,o=n(6928),i=n(3735),s=n(3798),c=s.mkdirs,a=s.mkdirsSync,l=n(3838),u=l.symlinkPaths,f=l.symlinkPathsSync,p=n(7064),d=p.symlinkType,h=p.symlinkTypeSync,y=n(9288).pathExists;e.exports={createSymlink:r((function(e,t,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,y(t,((s,a)=>s?r(s):a?r(null):void u(e,t,((s,a)=>{if(s)return r(s);e=a.toDst,d(a.toCwd,n,((n,s)=>{if(n)return r(n);const a=o.dirname(t);y(a,((n,o)=>n?r(n):o?i.symlink(e,t,s,r):void c(a,(n=>{if(n)return r(n);i.symlink(e,t,s,r)}))))}))}))))})),createSymlinkSync:function(e,t,n){if(i.existsSync(t))return;const r=f(e,t);e=r.toDst,n=h(r.toCwd,n);const s=o.dirname(t);return i.existsSync(s)||a(s),i.symlinkSync(e,t,n)}}},8737:(e,t,n)=>{"use strict";const r=n(1236).S,o=n(3735),i=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof o[e]));Object.keys(o).forEach((e=>{"promises"!==e&&(t[e]=o[e])})),i.forEach((e=>{t[e]=r(o[e])})),t.exists=function(e,t){return"function"==typeof t?o.exists(e,t):new Promise((t=>o.exists(e,t)))},t.read=function(e,t,n,r,i,s){return"function"==typeof s?o.read(e,t,n,r,i,s):new Promise(((s,c)=>{o.read(e,t,n,r,i,((e,t,n)=>{if(e)return c(e);s({bytesRead:t,buffer:n})}))}))},t.write=function(e,t,...n){return"function"==typeof n[n.length-1]?o.write(e,t,...n):new Promise(((r,i)=>{o.write(e,t,...n,((e,t,n)=>{if(e)return i(e);r({bytesWritten:t,buffer:n})}))}))},"function"==typeof o.realpath.native&&(t.realpath.native=r(o.realpath.native))},1605:(e,t,n)=>{"use strict";e.exports=Object.assign({},n(8737),n(1881),n(4423),n(2591),n(6288),n(3376),n(3798),n(8617),n(2455),n(3811),n(9288),n(5422));const r=n(9896);Object.getOwnPropertyDescriptor(r,"promises")&&Object.defineProperty(e.exports,"promises",{get:()=>r.promises})},3376:(e,t,n)=>{"use strict";const r=n(1236).S,o=n(2934);o.outputJson=r(n(6426)),o.outputJsonSync=n(2188),o.outputJSON=o.outputJson,o.outputJSONSync=o.outputJsonSync,o.writeJSON=o.writeJson,o.writeJSONSync=o.writeJsonSync,o.readJSON=o.readJson,o.readJSONSync=o.readJsonSync,e.exports=o},2934:(e,t,n)=>{"use strict";const r=n(1236).S,o=n(2909);e.exports={readJson:r(o.readFile),readJsonSync:o.readFileSync,writeJson:r(o.writeFile),writeJsonSync:o.writeFileSync}},2188:(e,t,n)=>{"use strict";const r=n(3735),o=n(6928),i=n(3798),s=n(2934);e.exports=function(e,t,n){const c=o.dirname(e);r.existsSync(c)||i.mkdirsSync(c),s.writeJsonSync(e,t,n)}},6426:(e,t,n)=>{"use strict";const r=n(6928),o=n(3798),i=n(9288).pathExists,s=n(2934);e.exports=function(e,t,n,c){"function"==typeof n&&(c=n,n={});const a=r.dirname(e);i(a,((r,i)=>r?c(r):i?s.writeJson(e,t,n,c):void o.mkdirs(a,(r=>{if(r)return c(r);s.writeJson(e,t,n,c)}))))}},3798:(e,t,n)=>{"use strict";const r=(0,n(1236).S)(n(3180)),o=n(3582);e.exports={mkdirs:r,mkdirsSync:o,mkdirp:r,mkdirpSync:o,ensureDir:r,ensureDirSync:o}},3582:(e,t,n)=>{"use strict";const r=n(3735),o=n(6928),i=n(2069).invalidWin32Path,s=parseInt("0777",8);e.exports=function e(t,n,c){n&&"object"==typeof n||(n={mode:n});let a=n.mode;const l=n.fs||r;if("win32"===process.platform&&i(t)){const e=new Error(t+" contains invalid WIN32 path characters.");throw e.code="EINVAL",e}void 0===a&&(a=s&~process.umask()),c||(c=null),t=o.resolve(t);try{l.mkdirSync(t,a),c=c||t}catch(r){if("ENOENT"===r.code){if(o.dirname(t)===t)throw r;c=e(o.dirname(t),n,c),e(t,n,c)}else{let e;try{e=l.statSync(t)}catch(e){throw r}if(!e.isDirectory())throw r}}return c}},3180:(e,t,n)=>{"use strict";const r=n(3735),o=n(6928),i=n(2069).invalidWin32Path,s=parseInt("0777",8);e.exports=function e(t,n,c,a){if("function"==typeof n?(c=n,n={}):n&&"object"==typeof n||(n={mode:n}),"win32"===process.platform&&i(t)){const e=new Error(t+" contains invalid WIN32 path characters.");return e.code="EINVAL",c(e)}let l=n.mode;const u=n.fs||r;void 0===l&&(l=s&~process.umask()),a||(a=null),c=c||function(){},t=o.resolve(t),u.mkdir(t,l,(r=>{if(!r)return c(null,a=a||t);if("ENOENT"===r.code){if(o.dirname(t)===t)return c(r);e(o.dirname(t),n,((r,o)=>{r?c(r,o):e(t,n,c,o)}))}else u.stat(t,((e,t)=>{e||!t.isDirectory()?c(r,a):c(null,a)}))}))}},2069:(e,t,n)=>{"use strict";const r=n(6928);function o(e){return(e=r.normalize(r.resolve(e)).split(r.sep)).length>0?e[0]:null}const i=/[<>:"|?*]/;e.exports={getRootPath:o,invalidWin32Path:function(e){const t=o(e);return e=e.replace(t,""),i.test(e)}}},8617:(e,t,n)=>{"use strict";e.exports={moveSync:n(7974)}},7974:(e,t,n)=>{"use strict";const r=n(3735),o=n(6928),i=n(1881).copySync,s=n(5422).removeSync,c=n(3798).mkdirpSync,a=n(6462);function l(e,t,n){try{r.renameSync(e,t)}catch(r){if("EXDEV"!==r.code)throw r;return function(e,t,n){return i(e,t,{overwrite:n,errorOnExist:!0}),s(e)}(e,t,n)}}e.exports=function(e,t,n){const i=(n=n||{}).overwrite||n.clobber||!1,{srcStat:u}=a.checkPathsSync(e,t,"move");return a.checkParentPathsSync(e,u,t,"move"),c(o.dirname(t)),function(e,t,n){if(n)return s(t),l(e,t,n);if(r.existsSync(t))throw new Error("dest already exists.");return l(e,t,n)}(e,t,i)}},2455:(e,t,n)=>{"use strict";const r=n(1236).S;e.exports={move:r(n(3314))}},3314:(e,t,n)=>{"use strict";const r=n(3735),o=n(6928),i=n(4423).copy,s=n(5422).remove,c=n(3798).mkdirp,a=n(9288).pathExists,l=n(6462);function u(e,t,n,o){r.rename(e,t,(r=>r?"EXDEV"!==r.code?o(r):function(e,t,n,r){i(e,t,{overwrite:n,errorOnExist:!0},(t=>t?r(t):s(e,r)))}(e,t,n,o):o()))}e.exports=function(e,t,n,r){"function"==typeof n&&(r=n,n={});const i=n.overwrite||n.clobber||!1;l.checkPaths(e,t,"move",((n,f)=>{if(n)return r(n);const{srcStat:p}=f;l.checkParentPaths(e,p,t,"move",(n=>{if(n)return r(n);c(o.dirname(t),(n=>n?r(n):function(e,t,n,r){if(n)return s(t,(o=>o?r(o):u(e,t,n,r)));a(t,((o,i)=>o?r(o):i?r(new Error("dest already exists.")):u(e,t,n,r)))}(e,t,i,r)))}))}))}},3811:(e,t,n)=>{"use strict";const r=n(1236).S,o=n(3735),i=n(6928),s=n(3798),c=n(9288).pathExists;e.exports={outputFile:r((function(e,t,n,r){"function"==typeof n&&(r=n,n="utf8");const a=i.dirname(e);c(a,((i,c)=>i?r(i):c?o.writeFile(e,t,n,r):void s.mkdirs(a,(i=>{if(i)return r(i);o.writeFile(e,t,n,r)}))))})),outputFileSync:function(e,...t){const n=i.dirname(e);if(o.existsSync(n))return o.writeFileSync(e,...t);s.mkdirsSync(n),o.writeFileSync(e,...t)}}},9288:(e,t,n)=>{"use strict";const r=n(1236).z,o=n(8737);e.exports={pathExists:r((function(e){return o.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:o.existsSync}},5422:(e,t,n)=>{"use strict";const r=n(1236).S,o=n(1249);e.exports={remove:r(o),removeSync:o.sync}},1249:(e,t,n)=>{"use strict";const r=n(3735),o=n(6928),i=n(2613),s="win32"===process.platform;function c(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||r[t],e[t+="Sync"]=e[t]||r[t]})),e.maxBusyTries=e.maxBusyTries||3}function a(e,t,n){let r=0;"function"==typeof t&&(n=t,t={}),i(e,"rimraf: missing path"),i.strictEqual(typeof e,"string","rimraf: path should be a string"),i.strictEqual(typeof n,"function","rimraf: callback function required"),i(t,"rimraf: invalid options argument provided"),i.strictEqual(typeof t,"object","rimraf: options should be object"),c(t),l(e,t,(function o(i){if(i){if(("EBUSY"===i.code||"ENOTEMPTY"===i.code||"EPERM"===i.code)&&r<t.maxBusyTries)return r++,setTimeout((()=>l(e,t,o)),100*r);"ENOENT"===i.code&&(i=null)}n(i)}))}function l(e,t,n){i(e),i(t),i("function"==typeof n),t.lstat(e,((r,o)=>r&&"ENOENT"===r.code?n(null):r&&"EPERM"===r.code&&s?u(e,t,r,n):o&&o.isDirectory()?p(e,t,r,n):void t.unlink(e,(r=>{if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return s?u(e,t,r,n):p(e,t,r,n);if("EISDIR"===r.code)return p(e,t,r,n)}return n(r)}))))}function u(e,t,n,r){i(e),i(t),i("function"==typeof r),n&&i(n instanceof Error),t.chmod(e,438,(o=>{o?r("ENOENT"===o.code?null:n):t.stat(e,((o,i)=>{o?r("ENOENT"===o.code?null:n):i.isDirectory()?p(e,t,n,r):t.unlink(e,r)}))}))}function f(e,t,n){let r;i(e),i(t),n&&i(n instanceof Error);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}try{r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?h(e,t,n):t.unlinkSync(e)}function p(e,t,n,r){i(e),i(t),n&&i(n instanceof Error),i("function"==typeof r),t.rmdir(e,(s=>{!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?r(n):r(s):function(e,t,n){i(e),i(t),i("function"==typeof n),t.readdir(e,((r,i)=>{if(r)return n(r);let s,c=i.length;if(0===c)return t.rmdir(e,n);i.forEach((r=>{a(o.join(e,r),t,(r=>{if(!s)return r?n(s=r):void(0==--c&&t.rmdir(e,n))}))}))}))}(e,t,r)}))}function d(e,t){let n;c(t=t||{}),i(e,"rimraf: missing path"),i.strictEqual(typeof e,"string","rimraf: path should be a string"),i(t,"rimraf: missing options"),i.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&s&&f(e,t,n)}try{n&&n.isDirectory()?h(e,t,null):t.unlinkSync(e)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return s?f(e,t,n):h(e,t,n);if("EISDIR"!==n.code)throw n;h(e,t,n)}}function h(e,t,n){i(e),i(t),n&&i(n instanceof Error);try{t.rmdirSync(e)}catch(r){if("ENOTDIR"===r.code)throw n;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(e,t){if(i(e),i(t),t.readdirSync(e).forEach((n=>d(o.join(e,n),t))),!s)return t.rmdirSync(e,t);{const n=Date.now();do{try{return t.rmdirSync(e,t)}catch(e){}}while(Date.now()-n<500)}}(e,t);else if("ENOENT"!==r.code)throw r}}e.exports=a,a.sync=d},1054:e=>{"use strict";e.exports=function(e){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}},6462:(e,t,n)=>{"use strict";const r=n(3735),o=n(6928),i=process.versions.node.split("."),s=Number.parseInt(i[0],10),c=Number.parseInt(i[1],10),a=Number.parseInt(i[2],10);function l(){if(s>10)return!0;if(10===s){if(c>5)return!0;if(5===c&&a>=0)return!0}return!1}function u(e,t){const n=o.resolve(e).split(o.sep).filter((e=>e)),r=o.resolve(t).split(o.sep).filter((e=>e));return n.reduce(((e,t,n)=>e&&r[n]===t),!0)}function f(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:function(e,t,n,o){!function(e,t,n){l()?r.stat(e,{bigint:!0},((e,o)=>{if(e)return n(e);r.stat(t,{bigint:!0},((e,t)=>e?"ENOENT"===e.code?n(null,{srcStat:o,destStat:null}):n(e):n(null,{srcStat:o,destStat:t})))})):r.stat(e,((e,o)=>{if(e)return n(e);r.stat(t,((e,t)=>e?"ENOENT"===e.code?n(null,{srcStat:o,destStat:null}):n(e):n(null,{srcStat:o,destStat:t})))}))}(e,t,((r,i)=>{if(r)return o(r);const{srcStat:s,destStat:c}=i;return c&&c.ino&&c.dev&&c.ino===s.ino&&c.dev===s.dev?o(new Error("Source and destination must not be the same.")):s.isDirectory()&&u(e,t)?o(new Error(f(e,t,n))):o(null,{srcStat:s,destStat:c})}))},checkPathsSync:function(e,t,n){const{srcStat:o,destStat:i}=function(e,t){let n,o;n=l()?r.statSync(e,{bigint:!0}):r.statSync(e);try{o=l()?r.statSync(t,{bigint:!0}):r.statSync(t)}catch(e){if("ENOENT"===e.code)return{srcStat:n,destStat:null};throw e}return{srcStat:n,destStat:o}}(e,t);if(i&&i.ino&&i.dev&&i.ino===o.ino&&i.dev===o.dev)throw new Error("Source and destination must not be the same.");if(o.isDirectory()&&u(e,t))throw new Error(f(e,t,n));return{srcStat:o,destStat:i}},checkParentPaths:function e(t,n,i,s,c){const a=o.resolve(o.dirname(t)),u=o.resolve(o.dirname(i));if(u===a||u===o.parse(u).root)return c();l()?r.stat(u,{bigint:!0},((r,o)=>r?"ENOENT"===r.code?c():c(r):o.ino&&o.dev&&o.ino===n.ino&&o.dev===n.dev?c(new Error(f(t,i,s))):e(t,n,u,s,c))):r.stat(u,((r,o)=>r?"ENOENT"===r.code?c():c(r):o.ino&&o.dev&&o.ino===n.ino&&o.dev===n.dev?c(new Error(f(t,i,s))):e(t,n,u,s,c)))},checkParentPathsSync:function e(t,n,i,s){const c=o.resolve(o.dirname(t)),a=o.resolve(o.dirname(i));if(a===c||a===o.parse(a).root)return;let u;try{u=l()?r.statSync(a,{bigint:!0}):r.statSync(a)}catch(e){if("ENOENT"===e.code)return;throw e}if(u.ino&&u.dev&&u.ino===n.ino&&u.dev===n.dev)throw new Error(f(t,i,s));return e(t,n,a,s)},isSrcSubdir:u}},7211:(e,t,n)=>{"use strict";const r=n(3735),o=n(857),i=n(6928);e.exports={hasMillisRes:function(e){let t=i.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=i.join(o.tmpdir(),t);const n=new Date(1435410243862);r.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",(o=>{if(o)return e(o);r.open(t,"r+",((o,i)=>{if(o)return e(o);r.futimes(i,n,n,(n=>{if(n)return e(n);r.close(i,(n=>{if(n)return e(n);r.stat(t,((t,n)=>{if(t)return e(t);e(null,n.mtime>1435410243e3)}))}))}))}))}))},hasMillisResSync:function(){let e=i.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=i.join(o.tmpdir(),e);const t=new Date(1435410243862);r.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const n=r.openSync(e,"r+");return r.futimesSync(n,t,t),r.closeSync(n),r.statSync(e).mtime>1435410243e3},timeRemoveMillis:function(e){if("number"==typeof e)return 1e3*Math.floor(e/1e3);if(e instanceof Date)return new Date(1e3*Math.floor(e.getTime()/1e3));throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")},utimesMillis:function(e,t,n,o){r.open(e,"r+",((e,i)=>{if(e)return o(e);r.futimes(i,t,n,(e=>{r.close(i,(t=>{o&&o(e||t)}))}))}))},utimesMillisSync:function(e,t,n){const o=r.openSync(e,"r+");return r.futimesSync(o,t,n),r.closeSync(o)}}},1283:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var n={__proto__:t(e)};else n=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})),n};var t=Object.getPrototypeOf||function(e){return e.__proto__}},3735:(e,t,n)=>{var r,o,i=n(9896),s=n(9106),c=n(1995),a=n(1283),l=n(9023);function u(e,t){Object.defineProperty(e,r,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(r=Symbol.for("graceful-fs.queue"),o=Symbol.for("graceful-fs.previous")):(r="___graceful-fs.queue",o="___graceful-fs.previous");var f,p=function(){};if(l.debuglog?p=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(p=function(){var e=l.format.apply(l,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!i[r]){var d=global[r]||[];u(i,d),i.close=function(e){function t(t,n){return e.call(i,t,(function(e){e||m(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(t,o,{value:e}),t}(i.close),i.closeSync=function(e){function t(t){e.apply(i,arguments),m()}return Object.defineProperty(t,o,{value:e}),t}(i.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){p(i[r]),n(2613).equal(i[r].length,0)}))}function h(e){s(e),e.gracefulify=h,e.createReadStream=function(t,n){return new e.ReadStream(t,n)},e.createWriteStream=function(t,n){return new e.WriteStream(t,n)};var t=e.readFile;e.readFile=function(e,n,r){return"function"==typeof n&&(r=n,n=null),function e(n,r,o,i){return t(n,r,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof o&&o.apply(this,arguments):y([e,[n,r,o],t,i||Date.now(),Date.now()])}))}(e,n,r)};var n=e.writeFile;e.writeFile=function(e,t,r,o){return"function"==typeof r&&(o=r,r=null),function e(t,r,o,i,s){return n(t,r,o,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):y([e,[t,r,o,i],n,s||Date.now(),Date.now()])}))}(e,t,r,o)};var r=e.appendFile;r&&(e.appendFile=function(e,t,n,o){return"function"==typeof n&&(o=n,n=null),function e(t,n,o,i,s){return r(t,n,o,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof i&&i.apply(this,arguments):y([e,[t,n,o,i],r,s||Date.now(),Date.now()])}))}(e,t,n,o)});var o=e.copyFile;o&&(e.copyFile=function(e,t,n,r){return"function"==typeof n&&(r=n,n=0),function e(t,n,r,i,s){return o(t,n,r,(function(o){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof i&&i.apply(this,arguments):y([e,[t,n,r,i],o,s||Date.now(),Date.now()])}))}(e,t,n,r)});var i=e.readdir;e.readdir=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r=a.test(process.version)?function(e,t,n,r){return i(e,o(e,t,n,r))}:function(e,t,n,r){return i(e,t,o(e,t,n,r))};return r(e,t,n);function o(e,t,n,o){return function(i,s){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?(s&&s.sort&&s.sort(),"function"==typeof n&&n.call(this,i,s)):y([r,[e,t,n],i,o||Date.now(),Date.now()])}}};var a=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var l=c(e);m=l.ReadStream,g=l.WriteStream}var u=e.ReadStream;u&&(m.prototype=Object.create(u.prototype),m.prototype.open=function(){var e=this;w(e.path,e.flags,e.mode,(function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())}))});var f=e.WriteStream;f&&(g.prototype=Object.create(f.prototype),g.prototype.open=function(){var e=this;w(e.path,e.flags,e.mode,(function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return m},set:function(e){m=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return g},set:function(e){g=e},enumerable:!0,configurable:!0});var p=m;Object.defineProperty(e,"FileReadStream",{get:function(){return p},set:function(e){p=e},enumerable:!0,configurable:!0});var d=g;function m(e,t){return this instanceof m?(u.apply(this,arguments),this):m.apply(Object.create(m.prototype),arguments)}function g(e,t){return this instanceof g?(f.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0});var S=e.open;function w(e,t,n,r){return"function"==typeof n&&(r=n,n=null),function e(t,n,r,o,i){return S(t,n,r,(function(s,c){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof o&&o.apply(this,arguments):y([e,[t,n,r,o],s,i||Date.now(),Date.now()])}))}(e,t,n,r)}return e.open=w,e}function y(e){p("ENQUEUE",e[0].name,e[1]),i[r].push(e),g()}function m(){for(var e=Date.now(),t=0;t<i[r].length;++t)i[r][t].length>2&&(i[r][t][3]=e,i[r][t][4]=e);g()}function g(){if(clearTimeout(f),f=void 0,0!==i[r].length){var e=i[r].shift(),t=e[0],n=e[1],o=e[2],s=e[3],c=e[4];if(void 0===s)p("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-s>=6e4){p("TIMEOUT",t.name,n);var a=n.pop();"function"==typeof a&&a.call(null,o)}else{var l=Date.now()-c,u=Math.max(c-s,1);l>=Math.min(1.2*u,100)?(p("RETRY",t.name,n),t.apply(null,n.concat([s]))):i[r].push(e)}void 0===f&&(f=setTimeout(g,0))}}global[r]||u(global,i[r]),e.exports=h(a(i)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!i.__patched&&(e.exports=h(i),i.__patched=!0)},1995:(e,t,n)=>{var r=n(2203).Stream;e.exports=function(e){return{ReadStream:function t(n,o){if(!(this instanceof t))return new t(n,o);r.call(this);var i=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,o=o||{};for(var s=Object.keys(o),c=0,a=s.length;c<a;c++){var l=s[c];this[l]=o[l]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return i.emit("error",e),void(i.readable=!1);i.fd=t,i.emit("open",t),i._read()})):process.nextTick((function(){i._read()}))},WriteStream:function t(n,o){if(!(this instanceof t))return new t(n,o);r.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var i=Object.keys(o),s=0,c=i.length;s<c;s++){var a=i[s];this[a]=o[a]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},9106:(e,t,n)=>{var r=n(9140),o=process.cwd,i=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return i||(i=o.call(process)),i};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var c=process.chdir;process.chdir=function(e){i=null,c.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,c)}e.exports=function(e){function t(t){return t?function(n,r,o){return t.call(e,n,r,(function(e){l(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function n(t){return t?function(n,r){try{return t.call(e,n,r)}catch(e){if(!l(e))throw e}}:t}function o(t){return t?function(n,r,o,i){return t.call(e,n,r,o,(function(e){l(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function i(t){return t?function(n,r,o){try{return t.call(e,n,r,o)}catch(e){if(!l(e))throw e}}:t}function c(t){return t?function(n,r,o){function i(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),o&&o.apply(this,arguments)}return"function"==typeof r&&(o=r,r=null),r?t.call(e,n,r,i):t.call(e,n,i)}:t}function a(t){return t?function(n,r){var o=r?t.call(e,n,r):t.call(e,n);return o&&(o.uid<0&&(o.uid+=4294967296),o.gid<0&&(o.gid+=4294967296)),o}:t}function l(e){return!e||"ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}var u;r.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,o){e.open(t,r.O_WRONLY|r.O_SYMLINK,n,(function(t,r){t?o&&o(t):e.fchmod(r,n,(function(t){e.close(r,(function(e){o&&o(t||e)}))}))}))},e.lchmodSync=function(t,n){var o,i=e.openSync(t,r.O_WRONLY|r.O_SYMLINK,n),s=!0;try{o=e.fchmodSync(i,n),s=!1}finally{if(s)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return o}}(e),e.lutimes||function(e){r.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,n,o,i){e.open(t,r.O_SYMLINK,(function(t,r){t?i&&i(t):e.futimes(r,n,o,(function(t){e.close(r,(function(e){i&&i(t||e)}))}))}))},e.lutimesSync=function(t,n,o){var i,s=e.openSync(t,r.O_SYMLINK),c=!0;try{i=e.futimesSync(s,n,o),c=!1}finally{if(c)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return i}):e.futimes&&(e.lutimes=function(e,t,n,r){r&&process.nextTick(r)},e.lutimesSync=function(){})}(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=i(e.chownSync),e.fchownSync=i(e.fchownSync),e.lchownSync=i(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=a(e.statSync),e.fstatSync=a(e.fstatSync),e.lstatSync=a(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(e,t,n,r){r&&process.nextTick(r)},e.lchownSync=function(){}),"win32"===s&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function n(n,r,o){var i=Date.now(),s=0;t(n,r,(function c(a){if(a&&("EACCES"===a.code||"EPERM"===a.code||"EBUSY"===a.code)&&Date.now()-i<6e4)return setTimeout((function(){e.stat(r,(function(e,i){e&&"ENOENT"===e.code?t(n,r,c):o(a)}))}),s),void(s<100&&(s+=10));o&&o(a)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(n,t),n}(e.rename)),e.read="function"!=typeof e.read?e.read:function(t){function n(n,r,o,i,s,c){var a;if(c&&"function"==typeof c){var l=0;a=function(u,f,p){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,n,r,o,i,s,a);c.apply(this,arguments)}}return t.call(e,n,r,o,i,s,a)}return Object.setPrototypeOf&&Object.setPrototypeOf(n,t),n}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(u=e.readSync,function(t,n,r,o,i){for(var s=0;;)try{return u.call(e,t,n,r,o,i)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}})}},2909:(e,t,n)=>{var r;try{r=n(3735)}catch(e){r=n(9896)}function o(e,t){var n,r="\n";return"object"==typeof t&&null!==t&&(t.spaces&&(n=t.spaces),t.EOL&&(r=t.EOL)),JSON.stringify(e,t?t.replacer:null,n).replace(/\n/g,r)+r}function i(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var s={readFile:function(e,t,n){null==n&&(n=t,t={}),"string"==typeof t&&(t={encoding:t});var o=(t=t||{}).fs||r,s=!0;"throws"in t&&(s=t.throws),o.readFile(e,t,(function(r,o){if(r)return n(r);var c;o=i(o);try{c=JSON.parse(o,t?t.reviver:null)}catch(t){return s?(t.message=e+": "+t.message,n(t)):n(null,null)}n(null,c)}))},readFileSync:function(e,t){"string"==typeof(t=t||{})&&(t={encoding:t});var n=t.fs||r,o=!0;"throws"in t&&(o=t.throws);try{var s=n.readFileSync(e,t);return s=i(s),JSON.parse(s,t.reviver)}catch(t){if(o)throw t.message=e+": "+t.message,t;return null}},writeFile:function(e,t,n,i){null==i&&(i=n,n={});var s=(n=n||{}).fs||r,c="";try{c=o(t,n)}catch(e){return void(i&&i(e,null))}s.writeFile(e,c,n,i)},writeFileSync:function(e,t,n){var i=(n=n||{}).fs||r,s=o(t,n);return i.writeFileSync(e,s,n)}};e.exports=s},9885:(e,t,n)=>{const r=n(7035),o=n(3565),i=new class{constructor(){const e={__LOG4JS_undefined__:void 0,__LOG4JS_NaN__:Number("abc"),__LOG4JS_Infinity__:1/0,"__LOG4JS_-Infinity__":-1/0};this.deMap=e,this.serMap={},Object.keys(this.deMap).forEach((e=>{const t=this.deMap[e];this.serMap[t]=e}))}canSerialise(e){return"string"!=typeof e&&e in this.serMap}serialise(e){return this.canSerialise(e)?this.serMap[e]:e}canDeserialise(e){return e in this.deMap}deserialise(e){return this.canDeserialise(e)?this.deMap[e]:e}};class s{constructor(e,t,n,r,o,i){if(this.startTime=new Date,this.categoryName=e,this.data=n,this.level=t,this.context=Object.assign({},r),this.pid=process.pid,this.error=i,void 0!==o){if(!o||"object"!=typeof o||Array.isArray(o))throw new TypeError("Invalid location type passed to LoggingEvent constructor");this.constructor._getLocationKeys().forEach((e=>{void 0!==o[e]&&(this[e]=o[e])}))}}static _getLocationKeys(){return["fileName","lineNumber","columnNumber","callStack","className","functionName","functionAlias","callerName"]}serialise(){return r.stringify(this,((e,t)=>(t instanceof Error&&(t=Object.assign({message:t.message,stack:t.stack},t)),i.serialise(t))))}static deserialise(e){let t;try{const n=r.parse(e,((e,t)=>{if(t&&t.message&&t.stack){const e=new Error(t);Object.keys(t).forEach((n=>{e[n]=t[n]})),t=e}return i.deserialise(t)}));this._getLocationKeys().forEach((e=>{void 0!==n[e]&&(n.location||(n.location={}),n.location[e]=n[e])})),t=new s(n.categoryName,o.getLevel(n.level.levelStr),n.data,n.context,n.location,n.error),t.startTime=new Date(n.startTime),t.pid=n.pid,n.cluster&&(t.cluster=n.cluster)}catch(n){t=new s("log4js",o.ERROR,["Unable to parse log:",e,"because: ",n])}return t}}e.exports=s},6279:e=>{function t(e){if("number"==typeof e&&Number.isInteger(e))return e;const t={K:1024,M:1048576,G:1073741824},n=Object.keys(t),r=e.slice(-1).toLocaleUpperCase(),o=e.slice(0,-1).trim();if(n.indexOf(r)<0||!Number.isInteger(Number(o)))throw Error(`maxLogSize: "${e}" is invalid`);return o*t[r]}function n(e){return function(e,t){const n=Object.assign({},t);return Object.keys(e).forEach((r=>{n[r]&&(n[r]=e[r](t[r]))})),n}({maxLogSize:t},e)}const r={dateFile:n,file:n,fileSync:n};e.exports.modifyConfig=e=>r[e.type]?r[e.type](e):e},4817:(e,t,n)=>{const r=n(5753)("log4js:categoryFilter");e.exports.configure=function(e,t,n){const o=n(e.appender);return function(e,t){return"string"==typeof e&&(e=[e]),n=>{r(`Checking ${n.categoryName} against ${e}`),-1===e.indexOf(n.categoryName)&&(r("Not excluded, sending to appender"),t(n))}}(e.exclude,o)}},2534:e=>{const t=console.log.bind(console);e.exports.configure=function(e,n){let r=n.colouredLayout;return e.layout&&(r=n.layout(e.layout.type,e.layout)),function(e,n){return r=>{t(e(r,n))}}(r,e.timezoneOffset)}},5401:(e,t,n)=>{const r=n(1129),o=n(857).EOL;e.exports.configure=function(e,t){let n=t.basicLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),e.mode=e.mode||384,function(e,t,n,i,s){i.maxSize=i.maxLogSize;const c=function(e,t,n){const o=new r.DateRollingFileStream(e,t,n);return o.on("error",(t=>{console.error("log4js.dateFileAppender - Writing to file %s, error happened ",e,t)})),o.on("drain",(()=>{process.emit("log4js:pause",!1)})),o}(e,t,i),a=function(e){c.writable&&(c.write(n(e,s)+o,"utf8")||process.emit("log4js:pause",!0))};return a.shutdown=function(e){c.end("","utf-8",e)},a}(e.filename,e.pattern,n,e,e.timezoneOffset)}},9061:(e,t,n)=>{const r=n(5753)("log4js:file"),o=n(6928),i=n(1129),s=n(857),c=s.EOL;let a=!1;const l=new Set;function u(){l.forEach((e=>{e.sighupHandler()}))}e.exports.configure=function(e,t){let n=t.basicLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),e.mode=e.mode||384,function(e,t,n,f,p,d){if("string"!=typeof e||0===e.length)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(o.sep))throw new Error(`Filename is a directory: ${e}`);function h(e,t,n,r){const o=new i.RollingFileStream(e,t,n,r);return o.on("error",(t=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",e,t)})),o.on("drain",(()=>{process.emit("log4js:pause",!1)})),o}0===e.indexOf(`~${o.sep}`)&&(e=e.replace("~",s.homedir())),e=o.normalize(e),r("Creating file appender (",e,", ",n,", ",f=f||0===f?f:5,", ",p,", ",d,")");let y=h(e,n,f,p);const m=function(e){if(y.writable){if(!0===p.removeColor){const t=/\x1b[[0-9;]*m/g;e.data=e.data.map((e=>"string"==typeof e?e.replace(t,""):e))}y.write(t(e,d)+c,"utf8")||process.emit("log4js:pause",!0)}};return m.reopen=function(){y.end((()=>{y=h(e,n,f,p)}))},m.sighupHandler=function(){r("SIGHUP handler called."),m.reopen()},m.shutdown=function(e){l.delete(m),0===l.size&&a&&(process.removeListener("SIGHUP",u),a=!1),y.end("","utf-8",e)},l.add(m),a||(process.on("SIGHUP",u),a=!0),m}(e.filename,n,e.maxLogSize,e.backups,e,e.timezoneOffset)}},6938:(e,t,n)=>{const r=n(5753)("log4js:fileSync"),o=n(6928),i=n(9896),s=n(857),c=s.EOL;function a(e,t){const n=e=>{try{return i.mkdirSync(e,{recursive:!0})}catch(t){if("ENOENT"===t.code)return n(o.dirname(e)),n(e);if("EEXIST"!==t.code&&"EROFS"!==t.code)throw t;try{if(i.statSync(e).isDirectory())return e;throw t}catch(e){throw t}}};n(o.dirname(e)),i.appendFileSync(e,"",{mode:t.mode,flag:t.flags})}class l{constructor(e,t,n,o){if(r("In RollingFileStream"),t<0)throw new Error(`maxLogSize (${t}) should be > 0`);this.filename=e,this.size=t,this.backups=n,this.options=o,this.currentSize=0,this.currentSize=function(e){let t=0;try{t=i.statSync(e).size}catch(t){a(e,o)}return t}(this.filename)}shouldRoll(){return r("should roll with current size %d, and max size %d",this.currentSize,this.size),this.currentSize>=this.size}roll(e){const t=this,n=new RegExp(`^${o.basename(e)}`);function s(t){return parseInt(t.slice(`${o.basename(e)}.`.length),10)||0}r("Rolling, rolling, rolling"),r("Renaming the old files"),i.readdirSync(o.dirname(e)).filter((function(e){return n.test(e)})).sort((function(e,t){return s(e)-s(t)})).reverse().forEach((function(n){const c=s(n);if(r(`Index of ${n} is ${c}`),0===t.backups)i.truncateSync(e,0);else if(c<t.backups){try{i.unlinkSync(`${e}.${c+1}`)}catch(e){}r(`Renaming ${n} -> ${e}.${c+1}`),i.renameSync(o.join(o.dirname(e),n),`${e}.${c+1}`)}}))}write(e,t){r("in write"),this.shouldRoll()&&(this.currentSize=0,this.roll(this.filename)),r("writing the chunk to the file"),this.currentSize+=e.length,i.appendFileSync(this.filename,e)}}e.exports.configure=function(e,t){let n=t.basicLayout;e.layout&&(n=t.layout(e.layout.type,e.layout));const u={flags:e.flags||"a",encoding:e.encoding||"utf8",mode:e.mode||384};return function(e,t,n,u,f,p){if("string"!=typeof e||0===e.length)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(o.sep))throw new Error(`Filename is a directory: ${e}`);0===e.indexOf(`~${o.sep}`)&&(e=e.replace("~",s.homedir())),e=o.normalize(e),r("Creating fileSync appender (",e,", ",n,", ",u=u||0===u?u:5,", ",f,", ",p,")");const d=function(e,t,n){let r;var o;return t?r=new l(e,t,n,f):(a(o=e,f),r={write(e){i.appendFileSync(o,e)}}),r}(e,n,u);return e=>{d.write(t(e,p)+c)}}(e.filename,n,e.maxLogSize,e.backups,u,e.timezoneOffset)}},3255:(e,t,n)=>{const r=n(6928),o=n(5753)("log4js:appenders"),i=n(9250),s=n(224),c=n(3565),a=n(5899),l=n(6279),u=new Map;u.set("console",n(2534)),u.set("stdout",n(3660)),u.set("stderr",n(1651)),u.set("logLevelFilter",n(7145)),u.set("categoryFilter",n(4817)),u.set("noLogFilter",n(1254)),u.set("file",n(9061)),u.set("dateFile",n(5401)),u.set("fileSync",n(6938)),u.set("tcp",n(8056));const f=new Map,p=(e,t)=>{let r;try{const t=`${e}.cjs`;r=n(8746).resolve(t),o("Loading module from ",t)}catch(t){r=e,o("Loading module from ",e)}try{return n(8746)(r)}catch(n){return void i.throwExceptionIf(t,"MODULE_NOT_FOUND"!==n.code,`appender "${e}" could not be loaded (error was: ${n})`)}},d=new Set,h=(e,t)=>{if(f.has(e))return f.get(e);if(!t.appenders[e])return!1;if(d.has(e))throw new Error(`Dependency loop detected for appender ${e}.`);d.add(e),o(`Creating appender ${e}`);const n=y(e,t);return d.delete(e),f.set(e,n),n},y=(e,t)=>{const f=t.appenders[e],d=f.type.configure?f.type:((e,t)=>u.get(e)||p(`./${e}`,t)||p(e,t)||n.c[n.s]&&n.c[n.s].filename&&p(r.join(r.dirname(n.c[n.s].filename),e),t)||p(r.join(process.cwd(),e),t))(f.type,t);return i.throwExceptionIf(t,i.not(d),`appender "${e}" is not valid (type "${f.type}" could not be found)`),d.appender&&(process.emitWarning(`Appender ${f.type} exports an appender function.`,"DeprecationWarning","log4js-node-DEP0001"),o("[log4js-node-DEP0001]",`DEPRECATION: Appender ${f.type} exports an appender function.`)),d.shutdown&&(process.emitWarning(`Appender ${f.type} exports a shutdown function.`,"DeprecationWarning","log4js-node-DEP0002"),o("[log4js-node-DEP0002]",`DEPRECATION: Appender ${f.type} exports a shutdown function.`)),o(`${e}: clustering.isMaster ? ${s.isMaster()}`),o(`${e}: appenderModule is ${n(9023).inspect(d)}`),s.onlyOnMaster((()=>(o(`calling appenderModule.configure for ${e} / ${f.type}`),d.configure(l.modifyConfig(f),a,(e=>h(e,t)),c))),(()=>{}))},m=e=>{if(f.clear(),d.clear(),!e)return;const t=[];Object.values(e.categories).forEach((e=>{t.push(...e.appenders)})),Object.keys(e.appenders).forEach((n=>{(t.includes(n)||"tcp-server"===e.appenders[n].type||"multiprocess"===e.appenders[n].type)&&h(n,e)}))},g=()=>{m()};g(),i.addListener((e=>{i.throwExceptionIf(e,i.not(i.anObject(e.appenders)),'must have a property "appenders" of type object.');const t=Object.keys(e.appenders);i.throwExceptionIf(e,i.not(t.length),"must define at least one appender."),t.forEach((t=>{i.throwExceptionIf(e,i.not(e.appenders[t].type),`appender "${t}" is not valid (must be an object with property "type")`)}))})),i.addListener(m),e.exports=f,e.exports.init=g},7145:e=>{e.exports.configure=function(e,t,n,r){const o=n(e.appender);return function(e,t,n,r){const o=r.getLevel(e),i=r.getLevel(t,r.FATAL);return e=>{const t=e.level;o.isLessThanOrEqualTo(t)&&i.isGreaterThanOrEqualTo(t)&&n(e)}}(e.level,e.maxLevel,o,r)}},1254:(e,t,n)=>{const r=n(5753)("log4js:noLogFilter");e.exports.configure=function(e,t,n){const o=n(e.appender);return function(e,t){return n=>{r(`Checking data: ${n.data} against filters: ${e}`),"string"==typeof e&&(e=[e]),e=e.filter((e=>null!=e&&""!==e));const o=new RegExp(e.join("|"),"i");(0===e.length||n.data.findIndex((e=>o.test(e)))<0)&&(r("Not excluded, sending to appender"),t(n))}}(e.exclude,o)}},1540:(e,t,n)=>{const r=n(5753)("log4js:recording"),o=[];function i(){return o.slice()}function s(){o.length=0}e.exports={configure:function(){return function(e){r(`received logEvent, number of events now ${o.length+1}`),r("log event was ",e),o.push(e)}},replay:i,playback:i,reset:s,erase:s}},1651:e=>{e.exports.configure=function(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),function(e,t){return n=>{process.stderr.write(`${e(n,t)}\n`)}}(n,e.timezoneOffset)}},3660:(e,t)=>{t.configure=function(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),function(e,t){return n=>{process.stdout.write(`${e(n,t)}\n`)}}(n,e.timezoneOffset)}},8056:(e,t,n)=>{const r=n(5753)("log4js:tcp"),o=n(9278);e.exports.configure=function(e,t){r(`configure with config = ${e}`);let n=function(e){return e.serialise()};return e.layout&&(n=t.layout(e.layout.type,e.layout)),function(e,t){let n=!1;const i=[];let s,c=3,a="__LOG4JS__";function l(e){r("Writing log event to socket"),n=s.write(`${t(e)}${a}`,"utf8")}function u(){let e;for(r("emptying buffer");e=i.shift();)l(e)}function f(e){n?l(e):(r("buffering log event because it cannot write at the moment"),i.push(e))}return function t(){r(`appender creating socket to ${e.host||"localhost"}:${e.port||5e3}`),a=`${e.endMsg||"__LOG4JS__"}`,s=o.createConnection(e.port||5e3,e.host||"localhost"),s.on("connect",(()=>{r("socket connected"),u(),n=!0})),s.on("drain",(()=>{r("drain event received, emptying buffer"),n=!0,u()})),s.on("timeout",s.end.bind(s)),s.on("error",(e=>{r("connection error",e),n=!1,u()})),s.on("close",t)}(),f.shutdown=function(e){r("shutdown called"),i.length&&c?(r("buffer has items, waiting 100ms to empty"),c-=1,setTimeout((()=>{f.shutdown(e)}),100)):(s.removeAllListeners("close"),s.end(e))},f}(e,n)}},1457:(e,t,n)=>{const r=n(5753)("log4js:categories"),o=n(9250),i=n(3565),s=n(3255),c=new Map;function a(e,t,n){if(!1===t.inherit)return;const r=n.lastIndexOf(".");if(r<0)return;const o=n.slice(0,r);let i=e.categories[o];i||(i={inherit:!0,appenders:[]}),a(e,i,o),!e.categories[o]&&i.appenders&&i.appenders.length&&i.level&&(e.categories[o]=i),t.appenders=t.appenders||[],t.level=t.level||i.level,i.appenders.forEach((e=>{t.appenders.includes(e)||t.appenders.push(e)})),t.parent=i}function l(e){e.categories&&Object.keys(e.categories).forEach((t=>{const n=e.categories[t];a(e,n,t)}))}o.addPreProcessingListener((e=>l(e))),o.addListener((e=>{o.throwExceptionIf(e,o.not(o.anObject(e.categories)),'must have a property "categories" of type object.');const t=Object.keys(e.categories);o.throwExceptionIf(e,o.not(t.length),"must define at least one category."),t.forEach((t=>{const n=e.categories[t];o.throwExceptionIf(e,[o.not(n.appenders),o.not(n.level)],`category "${t}" is not valid (must be an object with properties "appenders" and "level")`),o.throwExceptionIf(e,o.not(Array.isArray(n.appenders)),`category "${t}" is not valid (appenders must be an array of appender names)`),o.throwExceptionIf(e,o.not(n.appenders.length),`category "${t}" is not valid (appenders must contain at least one appender name)`),Object.prototype.hasOwnProperty.call(n,"enableCallStack")&&o.throwExceptionIf(e,"boolean"!=typeof n.enableCallStack,`category "${t}" is not valid (enableCallStack must be boolean type)`),n.appenders.forEach((n=>{o.throwExceptionIf(e,o.not(s.get(n)),`category "${t}" is not valid (appender "${n}" is not defined)`)})),o.throwExceptionIf(e,o.not(i.getLevel(n.level)),`category "${t}" is not valid (level "${n.level}" not recognised; valid levels are ${i.levels.join(", ")})`)})),o.throwExceptionIf(e,o.not(e.categories.default),'must define a "default" category.')}));const u=e=>{c.clear(),e&&Object.keys(e.categories).forEach((t=>{const n=e.categories[t],o=[];n.appenders.forEach((e=>{o.push(s.get(e)),r(`Creating category ${t}`),c.set(t,{appenders:o,level:i.getLevel(n.level),enableCallStack:n.enableCallStack||!1})}))}))},f=()=>{u()};f(),o.addListener(u);const p=e=>{if(r(`configForCategory: searching for config for ${e}`),c.has(e))return r(`configForCategory: ${e} exists in config, returning it`),c.get(e);let t;return e.indexOf(".")>0?(r(`configForCategory: ${e} has hierarchy, cloning from parents`),t={...p(e.slice(0,e.lastIndexOf(".")))}):(c.has("default")||u({categories:{default:{appenders:["out"],level:"OFF"}}}),r("configForCategory: cloning default category"),t={...c.get("default")}),c.set(e,t),t};e.exports=c,e.exports=Object.assign(e.exports,{appendersForCategory:e=>p(e).appenders,getLevelForCategory:e=>p(e).level,setLevelForCategory:(e,t)=>{p(e).level=t},getEnableCallStackForCategory:e=>!0===p(e).enableCallStack,setEnableCallStackForCategory:(e,t)=>{p(e).enableCallStack=t},init:f})},224:(e,t,n)=>{const r=n(5753)("log4js:clustering"),o=n(9885),i=n(9250);let s=!1,c=null;try{c=n(9907)}catch(e){r("cluster module not present"),s=!0}const a=[];let l=!1,u="NODE_APP_INSTANCE";const f=()=>l&&"0"===process.env[u],p=()=>s||c&&c.isMaster||f(),d=e=>{a.forEach((t=>t(e)))},h=(e,t)=>{if(r("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&"log4js:message"===t.topic){r("received message: ",t.data);const e=o.deserialise(t.data);d(e)}};s||i.addListener((e=>{a.length=0,({pm2:l,disableClustering:s,pm2InstanceVar:u="NODE_APP_INSTANCE"}=e),r(`clustering disabled ? ${s}`),r(`cluster.isMaster ? ${c&&c.isMaster}`),r(`pm2 enabled ? ${l}`),r(`pm2InstanceVar = ${u}`),r(`process.env[${u}] = ${process.env[u]}`),l&&process.removeListener("message",h),c&&c.removeListener&&c.removeListener("message",h),s||e.disableClustering?r("Not listening for cluster messages, because clustering disabled."):f()?(r("listening for PM2 broadcast messages"),process.on("message",h)):c&&c.isMaster?(r("listening for cluster messages"),c.on("message",h)):r("not listening for messages, because we are not a master process")})),e.exports={onlyOnMaster:(e,t)=>p()?e():t,isMaster:p,send:e=>{p()?d(e):(l||(e.cluster={workerId:c.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{a.push(e)}}},9250:(e,t,n)=>{const r=n(9023),o=n(5753)("log4js:configuration"),i=[],s=[],c=e=>!e,a=e=>e&&"object"==typeof e&&!Array.isArray(e),l=(e,t,n)=>{(Array.isArray(t)?t:[t]).forEach((t=>{if(t)throw new Error(`Problem with log4js configuration: (${r.inspect(e,{depth:5})}) - ${n}`)}))};e.exports={configure:e=>{o("New configuration to be validated: ",e),l(e,c(a(e)),"must be an object."),o(`Calling pre-processing listeners (${i.length})`),i.forEach((t=>t(e))),o("Configuration pre-processing finished."),o(`Calling configuration listeners (${s.length})`),s.forEach((t=>t(e))),o("Configuration finished.")},addListener:e=>{s.push(e),o(`Added listener, now ${s.length} listeners`)},addPreProcessingListener:e=>{i.push(e),o(`Added pre-processing listener, now ${i.length} listeners`)},throwExceptionIf:l,anObject:a,anInteger:e=>e&&"number"==typeof e&&Number.isInteger(e),validIdentifier:e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),not:c}},8439:(e,t,n)=>{const r=n(3565);function o(e){return e.originalUrl||e.url}function i(e,t){for(let n=0;n<t.length;n++)e=e.replace(t[n].token,t[n].replacement);return e}e.exports=function(e,t){t="string"==typeof t||"function"==typeof t?{format:t}:t||{};const n=e;let s=r.getLevel(t.level,r.INFO);const c=t.format||':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"';return(e,a,l)=>{if(void 0!==e._logging)return l();if("function"!=typeof t.nolog){const n=function(e){let t=null;if(e instanceof RegExp&&(t=e),"string"==typeof e&&(t=new RegExp(e)),Array.isArray(e)){const n=e.map((e=>e.source?e.source:e));t=new RegExp(n.join("|"))}return t}(t.nolog);if(n&&n.test(e.originalUrl))return l()}if(n.isLevelEnabled(s)||"auto"===t.level){const l=new Date,{writeHead:u}=a;e._logging=!0,a.writeHead=(e,t)=>{a.writeHead=u,a.writeHead(e,t),a.__statusCode=e,a.__headers=t||{}};let f=!1;const p=()=>{if(f)return;if(f=!0,"function"==typeof t.nolog&&!0===t.nolog(e,a))return void(e._logging=!1);a.responseTime=new Date-l,a.statusCode&&"auto"===t.level&&(s=r.INFO,a.statusCode>=300&&(s=r.WARN),a.statusCode>=400&&(s=r.ERROR)),s=function(e,t,n){let o=t;if(n){const t=n.find((t=>{let n=!1;return n=t.from&&t.to?e>=t.from&&e<=t.to:-1!==t.codes.indexOf(e),n}));t&&(o=r.getLevel(t.level,o))}return o}(a.statusCode,s,t.statusRules);const u=function(e,t,n){const r=[];return r.push({token:":url",replacement:o(e)}),r.push({token:":protocol",replacement:e.protocol}),r.push({token:":hostname",replacement:e.hostname}),r.push({token:":method",replacement:e.method}),r.push({token:":status",replacement:t.__statusCode||t.statusCode}),r.push({token:":response-time",replacement:t.responseTime}),r.push({token:":date",replacement:(new Date).toUTCString()}),r.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),r.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),r.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),r.push({token:":user-agent",replacement:e.headers["user-agent"]}),r.push({token:":content-length",replacement:t.getHeader("content-length")||t.__headers&&t.__headers["Content-Length"]||"-"}),r.push({token:/:req\[([^\]]+)]/g,replacement:(t,n)=>e.headers[n.toLowerCase()]}),r.push({token:/:res\[([^\]]+)]/g,replacement:(e,n)=>t.getHeader(n.toLowerCase())||t.__headers&&t.__headers[n]}),(e=>{const t=e.concat();for(let e=0;e<t.length;++e)for(let n=e+1;n<t.length;++n)t[e].token==t[n].token&&t.splice(n--,1);return t})(n.concat(r))}(e,a,t.tokens||[]);if(t.context&&n.addContext("res",a),"function"==typeof c){const t=c(e,a,(e=>i(e,u)));t&&n.log(s,t)}else n.log(s,i(c,u));t.context&&n.removeContext("res")};a.on("end",p),a.on("finish",p),a.on("error",p),a.on("close",p)}return l()}}},5899:(e,t,n)=>{const r=n(3011),o=n(857),i=n(9023),s=n(6928),c=n(7016),a=n(5753)("log4js:layouts"),l={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function u(e){return e?`[${l[e][0]}m`:""}function f(e){return e?`[${l[e][1]}m`:""}function p(e,t){return n=i.format("[%s] [%s] %s - ",r.asString(e.startTime),e.level.toString(),e.categoryName),u(o=t)+n+f(o);var n,o}function d(e){return p(e)+i.format(...e.data)}function h(e){return p(e,e.level.colour)+i.format(...e.data)}function y(e){return i.format(...e.data)}function m(e){return e.data[0]}function g(e,t){const n=/%(-?[0-9]+)?(\.?-?[0-9]+)?([[\]cdhmnprzxXyflosCMAF%])(\{([^}]+)\})?|([^%]+)/;function l(e){return e&&e.pid?e.pid.toString():process.pid.toString()}e=e||"%r %p %c - %m%n";const p={c:function(e,t){let n=e.categoryName;if(t){const e=parseInt(t,10),r=n.split(".");e<r.length&&(n=r.slice(r.length-e).join("."))}return n},d:function(e,t){let n=r.ISO8601_FORMAT;if(t)switch(n=t,n){case"ISO8601":case"ISO8601_FORMAT":n=r.ISO8601_FORMAT;break;case"ISO8601_WITH_TZ_OFFSET":case"ISO8601_WITH_TZ_OFFSET_FORMAT":n=r.ISO8601_WITH_TZ_OFFSET_FORMAT;break;case"ABSOLUTE":process.emitWarning("Pattern %d{ABSOLUTE} is deprecated in favor of %d{ABSOLUTETIME}. Please use %d{ABSOLUTETIME} instead.","DeprecationWarning","log4js-node-DEP0003"),a("[log4js-node-DEP0003]","DEPRECATION: Pattern %d{ABSOLUTE} is deprecated and replaced by %d{ABSOLUTETIME}.");case"ABSOLUTETIME":case"ABSOLUTETIME_FORMAT":n=r.ABSOLUTETIME_FORMAT;break;case"DATE":process.emitWarning("Pattern %d{DATE} is deprecated due to the confusion it causes when used. Please use %d{DATETIME} instead.","DeprecationWarning","log4js-node-DEP0004"),a("[log4js-node-DEP0004]","DEPRECATION: Pattern %d{DATE} is deprecated and replaced by %d{DATETIME}.");case"DATETIME":case"DATETIME_FORMAT":n=r.DATETIME_FORMAT}return r.asString(n,e.startTime)},h:function(){return o.hostname().toString()},m:function(e,t){let n=e.data;if(t){const[e,r]=t.split(",");n=n.slice(e,r)}return i.format(...n)},n:function(){return o.EOL},p:function(e){return e.level.toString()},r:function(e){return r.asString("hh:mm:ss",e.startTime)},"[":function(e){return u(e.level.colour)},"]":function(e){return f(e.level.colour)},y:function(){return l()},z:l,"%":function(){return"%"},x:function(e,n){return void 0!==t[n]?"function"==typeof t[n]?t[n](e):t[n]:null},X:function(e,t){const n=e.context[t];return void 0!==n?"function"==typeof n?n(e):n:null},f:function(e,t){let n=e.fileName||"";if(n=function(e){const t="file://";return e.startsWith(t)&&("function"==typeof c.fileURLToPath?e=c.fileURLToPath(e):(e=s.normalize(e.replace(new RegExp(`^${t}`),"")),"win32"===process.platform&&(e=e.startsWith("\\")?e.slice(1):s.sep+s.sep+e))),e}(n),t){const e=parseInt(t,10),r=n.split(s.sep);r.length>e&&(n=r.slice(-e).join(s.sep))}return n},l:function(e){return e.lineNumber?`${e.lineNumber}`:""},o:function(e){return e.columnNumber?`${e.columnNumber}`:""},s:function(e){return e.callStack||""},C:function(e){return e.className||""},M:function(e){return e.functionName||""},A:function(e){return e.functionAlias||""},F:function(e){return e.callerName||""}};function d(e,t,n){return p[e](t,n)}function h(e,t,n){let r=e;return r=function(e,t){let n;return e?(n=parseInt(e.slice(1),10),n>0?t.slice(0,n):t.slice(n)):t}(t,r),r=function(e,t){let n;if(e)if("-"===e.charAt(0))for(n=parseInt(e.slice(1),10);t.length<n;)t+=" ";else for(n=parseInt(e,10);t.length<n;)t=` ${t}`;return t}(n,r),r}return function(t){let r,o="",i=e;for(;null!==(r=n.exec(i));){const e=r[1],n=r[2],s=r[3],c=r[5],a=r[6];o+=a?a.toString():h(d(s,t,c),n,e),i=i.slice(r.index+r[0].length)}return o}}const S={messagePassThrough:()=>y,basic:()=>d,colored:()=>h,coloured:()=>h,pattern:e=>g(e&&e.pattern,e&&e.tokens),dummy:()=>m};e.exports={basicLayout:d,messagePassThroughLayout:y,patternLayout:g,colouredLayout:h,coloredLayout:h,dummyLayout:m,addLayout(e,t){S[e]=t},layout:(e,t)=>S[e]&&S[e](t)}},3565:(e,t,n)=>{const r=n(9250),o=["white","grey","black","blue","cyan","green","magenta","red","yellow"];class i{constructor(e,t,n){this.level=e,this.levelStr=t,this.colour=n}toString(){return this.levelStr}static getLevel(e,t){return e?e instanceof i?e:(e instanceof Object&&e.levelStr&&(e=e.levelStr),i[e.toString().toUpperCase()]||t):t}static addLevels(e){e&&(Object.keys(e).forEach((t=>{const n=t.toUpperCase();i[n]=new i(e[t].value,n,e[t].colour);const r=i.levels.findIndex((e=>e.levelStr===n));r>-1?i.levels[r]=i[n]:i.levels.push(i[n])})),i.levels.sort(((e,t)=>e.level-t.level)))}isLessThanOrEqualTo(e){return"string"==typeof e&&(e=i.getLevel(e)),this.level<=e.level}isGreaterThanOrEqualTo(e){return"string"==typeof e&&(e=i.getLevel(e)),this.level>=e.level}isEqualTo(e){return"string"==typeof e&&(e=i.getLevel(e)),this.level===e.level}}i.levels=[],i.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}}),r.addListener((e=>{const t=e.levels;t&&(r.throwExceptionIf(e,r.not(r.anObject(t)),"levels must be an object"),Object.keys(t).forEach((n=>{r.throwExceptionIf(e,r.not(r.validIdentifier(n)),`level name "${n}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),r.throwExceptionIf(e,r.not(r.anObject(t[n])),`level "${n}" must be an object`),r.throwExceptionIf(e,r.not(t[n].value),`level "${n}" must have a 'value' property`),r.throwExceptionIf(e,r.not(r.anInteger(t[n].value)),`level "${n}".value must have an integer value`),r.throwExceptionIf(e,r.not(t[n].colour),`level "${n}" must have a 'colour' property`),r.throwExceptionIf(e,r.not(o.indexOf(t[n].colour)>-1),`level "${n}".colour must be one of ${o.join(", ")}`)})))})),r.addListener((e=>{i.addLevels(e.levels)})),e.exports=i},1779:(e,t,n)=>{const r=n(5753)("log4js:main"),o=n(9896),i=n(9844)({proto:!0}),s=n(9250),c=n(5899),a=n(3565),l=n(3255),u=n(1457),f=n(7510),p=n(224),d=n(8439),h=n(1540);let y=!1;function m(e){y&&(r("Received log event ",e),u.appendersForCategory(e.categoryName).forEach((t=>{t(e)})))}function g(e){y&&S();let t=e;return"string"==typeof t&&(t=function(e){r(`Loading configuration from ${e}`);try{return JSON.parse(o.readFileSync(e,"utf8"))}catch(t){throw new Error(`Problem reading config from file "${e}". Error was ${t.message}`,t)}}(e)),r(`Configuration is ${t}`),s.configure(i(t)),p.onMessage(m),y=!0,w}function S(e=()=>{}){if("function"!=typeof e)throw new TypeError("Invalid callback passed to shutdown");r("Shutdown called. Disabling all log writing."),y=!1;const t=Array.from(l.values());l.init(),u.init();const n=t.reduce(((e,t)=>t.shutdown?e+1:e),0);0===n&&(r("No appenders with shutdown functions found."),e());let o,i=0;function s(t){o=o||t,i+=1,r(`Appender shutdowns complete: ${i} / ${n}`),i>=n&&(r("All shutdown functions completed."),e(o))}r(`Found ${n} appenders with shutdown functions.`),t.filter((e=>e.shutdown)).forEach((e=>e.shutdown(s)))}const w={getLogger:function(e){return y||g(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new f(e||"default")},configure:g,isConfigured:function(){return y},shutdown:S,connectLogger:d,levels:a,addLayout:c.addLayout,recording:function(){return h}};e.exports=w},7510:(e,t,n)=>{const r=n(5753)("log4js:logger"),o=n(9885),i=n(3565),s=n(224),c=n(1457),a=n(9250),l=/^(?:\s*)at (?:(.+) \()?(?:([^(]+?):(\d+):(\d+))\)?$/;function u(e,t=4){try{const n=e.stack.split("\n").slice(t);if(!n.length)return null;const r=l.exec(n[0]);if(r&&5===r.length){let e="",t="",o="";return r[1]&&""!==r[1]&&([t,o]=r[1].replace(/[[\]]/g,"").split(" as "),o=o||"",t.includes(".")&&([e,t]=t.split("."))),{fileName:r[2],lineNumber:parseInt(r[3],10),columnNumber:parseInt(r[4],10),callStack:n.join("\n"),className:e,functionName:t,functionAlias:o,callerName:r[1]||""}}console.error("log4js.logger - defaultParseCallStack error")}catch(e){console.error("log4js.logger - defaultParseCallStack error",e)}return null}class f{constructor(e){if(!e)throw new Error("No category provided.");this.category=e,this.context={},this.callStackSkipIndex=0,this.parseCallStack=u,r(`Logger created (${this.category}, ${this.level})`)}get level(){return i.getLevel(c.getLevelForCategory(this.category),i.OFF)}set level(e){c.setLevelForCategory(this.category,i.getLevel(e,this.level))}get useCallStack(){return c.getEnableCallStackForCategory(this.category)}set useCallStack(e){c.setEnableCallStackForCategory(this.category,!0===e)}get callStackLinesToSkip(){return this.callStackSkipIndex}set callStackLinesToSkip(e){if("number"!=typeof e)throw new TypeError("Must be a number");if(e<0)throw new RangeError("Must be >= 0");this.callStackSkipIndex=e}log(e,...t){const n=i.getLevel(e);n?this.isLevelEnabled(n)&&this._log(n,t):a.validIdentifier(e)&&t.length>0?(this.log(i.WARN,"log4js:logger.log: valid log-level not found as first parameter given:",e),this.log(i.INFO,`[${e}]`,...t)):this.log(i.INFO,e,...t)}isLevelEnabled(e){return this.level.isLessThanOrEqualTo(e)}_log(e,t){r(`sending log data (${e}) to appenders`);const n=t.find((e=>e instanceof Error));let i;if(this.useCallStack){try{n&&(i=this.parseCallStack(n,this.callStackSkipIndex+1))}catch(e){}i=i||this.parseCallStack(new Error,this.callStackSkipIndex+3+1)}const c=new o(this.category,e,t,this.context,i,n);s.send(c)}addContext(e,t){this.context[e]=t}removeContext(e){delete this.context[e]}clearContext(){this.context={}}setParseCallStackFunction(e){if("function"==typeof e)this.parseCallStack=e;else{if(void 0!==e)throw new TypeError("Invalid type passed to setParseCallStackFunction");this.parseCallStack=u}}}function p(e){const t=i.getLevel(e),n=t.toString().toLowerCase().replace(/_([a-z])/g,(e=>e[1].toUpperCase())),r=n[0].toUpperCase()+n.slice(1);f.prototype[`is${r}Enabled`]=function(){return this.isLevelEnabled(t)},f.prototype[n]=function(...e){this.log(t,...e)}}i.levels.forEach(p),a.addListener((()=>{i.levels.forEach(p)})),e.exports=f},9844:e=>{"use strict";function t(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}e.exports=function(e){if((e=e||{}).circles)return function(e){const n=[],r=[],o=new Map;if(o.set(Date,(e=>new Date(e))),o.set(Map,((e,t)=>new Map(s(Array.from(e),t)))),o.set(Set,((e,t)=>new Set(s(Array.from(e),t)))),e.constructorHandlers)for(const t of e.constructorHandlers)o.set(t[0],t[1]);let i=null;return e.proto?function e(c){if("object"!=typeof c||null===c)return c;if(Array.isArray(c))return s(c,e);if(c.constructor!==Object&&(i=o.get(c.constructor)))return i(c,e);const a={};n.push(c),r.push(a);for(const s in c){const l=c[s];if("object"!=typeof l||null===l)a[s]=l;else if(l.constructor!==Object&&(i=o.get(l.constructor)))a[s]=i(l,e);else if(ArrayBuffer.isView(l))a[s]=t(l);else{const t=n.indexOf(l);a[s]=-1!==t?r[t]:e(l)}}return n.pop(),r.pop(),a}:function e(c){if("object"!=typeof c||null===c)return c;if(Array.isArray(c))return s(c,e);if(c.constructor!==Object&&(i=o.get(c.constructor)))return i(c,e);const a={};n.push(c),r.push(a);for(const s in c){if(!1===Object.hasOwnProperty.call(c,s))continue;const l=c[s];if("object"!=typeof l||null===l)a[s]=l;else if(l.constructor!==Object&&(i=o.get(l.constructor)))a[s]=i(l,e);else if(ArrayBuffer.isView(l))a[s]=t(l);else{const t=n.indexOf(l);a[s]=-1!==t?r[t]:e(l)}}return n.pop(),r.pop(),a};function s(e,s){const c=Object.keys(e),a=new Array(c.length);for(let l=0;l<c.length;l++){const u=c[l],f=e[u];if("object"!=typeof f||null===f)a[u]=f;else if(f.constructor!==Object&&(i=o.get(f.constructor)))a[u]=i(f,s);else if(ArrayBuffer.isView(f))a[u]=t(f);else{const e=n.indexOf(f);a[u]=-1!==e?r[e]:s(f)}}return a}}(e);const n=new Map;if(n.set(Date,(e=>new Date(e))),n.set(Map,((e,t)=>new Map(o(Array.from(e),t)))),n.set(Set,((e,t)=>new Set(o(Array.from(e),t)))),e.constructorHandlers)for(const t of e.constructorHandlers)n.set(t[0],t[1]);let r=null;return e.proto?function e(i){if("object"!=typeof i||null===i)return i;if(Array.isArray(i))return o(i,e);if(i.constructor!==Object&&(r=n.get(i.constructor)))return r(i,e);const s={};for(const o in i){const c=i[o];"object"!=typeof c||null===c?s[o]=c:c.constructor!==Object&&(r=n.get(c.constructor))?s[o]=r(c,e):ArrayBuffer.isView(c)?s[o]=t(c):s[o]=e(c)}return s}:function e(i){if("object"!=typeof i||null===i)return i;if(Array.isArray(i))return o(i,e);if(i.constructor!==Object&&(r=n.get(i.constructor)))return r(i,e);const s={};for(const o in i){if(!1===Object.hasOwnProperty.call(i,o))continue;const c=i[o];"object"!=typeof c||null===c?s[o]=c:c.constructor!==Object&&(r=n.get(c.constructor))?s[o]=r(c,e):ArrayBuffer.isView(c)?s[o]=t(c):s[o]=e(c)}return s};function o(e,o){const i=Object.keys(e),s=new Array(i.length);for(let c=0;c<i.length;c++){const a=i[c],l=e[a];"object"!=typeof l||null===l?s[a]=l:l.constructor!==Object&&(r=n.get(l.constructor))?s[a]=r(l,o):ArrayBuffer.isView(l)?s[a]=t(l):s[a]=o(l)}return s}}},4202:(e,t,n)=>{const r=n(2667);e.exports=class extends r{constructor(e,t,n){t&&"object"==typeof t&&(n=t,t=null),n||(n={}),t||(t="yyyy-MM-dd"),n.pattern=t,n.numBackups||0===n.numBackups?n.daysToKeep=n.numBackups:(n.daysToKeep||0===n.daysToKeep?process.emitWarning("options.daysToKeep is deprecated due to the confusion it causes when used together with file size rolling. Please use options.numBackups instead.","DeprecationWarning","streamroller-DEP0001"):n.daysToKeep=1,n.numBackups=n.daysToKeep),super(e,n),this.mode=this.options.mode}get theStream(){return this.currentFileStream}}},5814:(e,t,n)=>{const r=n(2667);e.exports=class extends r{constructor(e,t,n,r){r||(r={}),t&&(r.maxSize=t),r.numBackups||0===r.numBackups||(n||0===n||(n=1),r.numBackups=n),super(e,r),this.backups=r.numBackups,this.size=this.options.maxSize}get theStream(){return this.currentFileStream}}},2667:(e,t,n)=>{const r=n(5753)("streamroller:RollingFileWriteStream"),o=n(1605),i=n(6928),s=n(857),c=n(6301),a=n(3011),{Writable:l}=n(2203),u=n(2072),f=n(655),p=n(4777);e.exports=class extends l{constructor(e,t){if(r(`constructor: creating RollingFileWriteStream. path=${e}`),"string"!=typeof e||0===e.length)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(i.sep))throw new Error(`Filename is a directory: ${e}`);0===e.indexOf(`~${i.sep}`)&&(e=e.replace("~",s.homedir())),super(t),this.options=this._parseOption(t),this.fileObject=i.parse(e),""===this.fileObject.dir&&(this.fileObject=i.parse(i.join(process.cwd(),e))),this.fileFormatter=u({file:this.fileObject,alwaysIncludeDate:this.options.alwaysIncludePattern,needsIndex:this.options.maxSize<Number.MAX_SAFE_INTEGER,compress:this.options.compress,keepFileExt:this.options.keepFileExt,fileNameSep:this.options.fileNameSep}),this.fileNameParser=f({file:this.fileObject,keepFileExt:this.options.keepFileExt,pattern:this.options.pattern,fileNameSep:this.options.fileNameSep}),this.state={currentSize:0},this.options.pattern&&(this.state.currentDate=a(this.options.pattern,c())),this.filename=this.fileFormatter({index:0,date:this.state.currentDate}),["a","a+","as","as+"].includes(this.options.flags)&&this._setExistingSizeAndDate(),r(`constructor: create new file ${this.filename}, state=${JSON.stringify(this.state)}`),this._renewWriteStream()}_setExistingSizeAndDate(){try{const e=o.statSync(this.filename);this.state.currentSize=e.size,this.options.pattern&&(this.state.currentDate=a(this.options.pattern,e.mtime))}catch(e){return}}_parseOption(e){const t={maxSize:0,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0600",8),flags:"a",compress:!1,keepFileExt:!1,alwaysIncludePattern:!1},n=Object.assign({},t,e);if(n.maxSize){if(n.maxSize<=0)throw new Error(`options.maxSize (${n.maxSize}) should be > 0`)}else delete n.maxSize;if(n.numBackups||0===n.numBackups){if(n.numBackups<0)throw new Error(`options.numBackups (${n.numBackups}) should be >= 0`);if(n.numBackups>=Number.MAX_SAFE_INTEGER)throw new Error(`options.numBackups (${n.numBackups}) should be < Number.MAX_SAFE_INTEGER`);n.numToKeep=n.numBackups+1}else if(n.numToKeep<=0)throw new Error(`options.numToKeep (${n.numToKeep}) should be > 0`);return r(`_parseOption: creating stream with option=${JSON.stringify(n)}`),n}_final(e){this.currentFileStream.end("",this.options.encoding,e)}_write(e,t,n){this._shouldRoll().then((()=>{r(`_write: writing chunk. file=${this.currentFileStream.path} state=${JSON.stringify(this.state)} chunk=${e}`),this.currentFileStream.write(e,t,(t=>{this.state.currentSize+=e.length,n(t)}))}))}async _shouldRoll(){(this._dateChanged()||this._tooBig())&&(r(`_shouldRoll: rolling because dateChanged? ${this._dateChanged()} or tooBig? ${this._tooBig()}`),await this._roll())}_dateChanged(){return this.state.currentDate&&this.state.currentDate!==a(this.options.pattern,c())}_tooBig(){return this.state.currentSize>=this.options.maxSize}_roll(){return r("_roll: closing the current stream"),new Promise(((e,t)=>{this.currentFileStream.end("",this.options.encoding,(()=>{this._moveOldFiles().then(e).catch(t)}))}))}async _moveOldFiles(){const e=await this._getExistingFiles();for(let t=(this.state.currentDate?e.filter((e=>e.date===this.state.currentDate)):e).length;t>=0;t--){r(`_moveOldFiles: i = ${t}`);const e=this.fileFormatter({date:this.state.currentDate,index:t}),n=this.fileFormatter({date:this.state.currentDate,index:t+1}),o={compress:this.options.compress&&0===t,mode:this.options.mode};await p(e,n,o)}this.state.currentSize=0,this.state.currentDate=this.state.currentDate?a(this.options.pattern,c()):null,r(`_moveOldFiles: finished rolling files. state=${JSON.stringify(this.state)}`),this._renewWriteStream(),await new Promise(((e,t)=>{this.currentFileStream.write("","utf8",(()=>{this._clean().then(e).catch(t)}))}))}async _getExistingFiles(){const e=await o.readdir(this.fileObject.dir).catch((()=>[]));r(`_getExistingFiles: files=${e}`);const t=e.map((e=>this.fileNameParser(e))).filter((e=>e)),n=e=>(e.timestamp?e.timestamp:c().getTime())-e.index;return t.sort(((e,t)=>n(e)-n(t))),t}_renewWriteStream(){const e=this.fileFormatter({date:this.state.currentDate,index:0}),t=e=>{try{return o.mkdirSync(e,{recursive:!0})}catch(n){if("ENOENT"===n.code)return t(i.dirname(e)),t(e);if("EEXIST"!==n.code&&"EROFS"!==n.code)throw n;try{if(o.statSync(e).isDirectory())return e;throw n}catch(e){throw n}}};t(this.fileObject.dir);const n={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode};var r,s;o.appendFileSync(e,"",(s="flags",(r={...n}).flag=r[s],delete r[s],r)),this.currentFileStream=o.createWriteStream(e,n),this.currentFileStream.on("error",(e=>{this.emit("error",e)}))}async _clean(){const e=await this._getExistingFiles();if(r(`_clean: numToKeep = ${this.options.numToKeep}, existingFiles = ${e.length}`),r("_clean: existing files are: ",e),this._tooManyFiles(e.length)){const n=e.slice(0,e.length-this.options.numToKeep).map((e=>i.format({dir:this.fileObject.dir,base:e.filename})));await(t=n,r(`deleteFiles: files to delete: ${t}`),Promise.all(t.map((e=>o.unlink(e).catch((t=>{r(`deleteFiles: error when unlinking ${e}, ignoring. Error was ${t}`)}))))))}var t}_tooManyFiles(e){return this.options.numToKeep>0&&e>this.options.numToKeep}}},2072:(e,t,n)=>{const r=n(5753)("streamroller:fileNameFormatter"),o=n(6928);e.exports=({file:e,keepFileExt:t,needsIndex:n,alwaysIncludeDate:i,compress:s,fileNameSep:c})=>{let a=c||".";const l=o.join(e.dir,e.name),u=t=>t+e.ext,f=(e,t,r)=>!n&&r||!t?e:e+a+t,p=(e,t,n)=>(t>0||i)&&n?e+a+n:e,d=(e,t)=>t&&s?e+".gz":e,h=t?[p,f,u,d]:[u,p,f,d];return({date:e,index:t})=>(r(`_formatFileName: date=${e}, index=${t}`),h.reduce(((n,r)=>r(n,t,e)),l))}},655:(e,t,n)=>{const r=n(5753)("streamroller:fileNameParser"),o=n(3011);e.exports=({file:e,keepFileExt:t,pattern:n,fileNameSep:i})=>{let s=i||".";const c="__NOT_MATCHING__";let a=[(e,t)=>e.endsWith(".gz")?(r("it is gzipped"),t.isCompressed=!0,e.slice(0,-3)):e,t?t=>t.startsWith(e.name)&&t.endsWith(e.ext)?(r("it starts and ends with the right things"),t.slice(e.name.length+1,-1*e.ext.length)):c:t=>t.startsWith(e.base)?(r("it starts with the right things"),t.slice(e.base.length+1)):c,n?(e,t)=>{const i=e.split(s);let c=i[i.length-1];r("items: ",i,", indexStr: ",c);let a=e;void 0!==c&&c.match(/^\d+$/)?(a=e.slice(0,-1*(c.length+1)),r(`dateStr is ${a}`),n&&!a&&(a=c,c="0")):c="0";try{const r=o.parse(n,a,new Date(0,0));return o.asString(n,r)!==a?e:(t.index=parseInt(c,10),t.date=a,t.timestamp=r.getTime(),"")}catch(t){return r(`Problem parsing ${a} as ${n}, error was: `,t),e}}:(e,t)=>e.match(/^\d+$/)?(r("it has an index"),t.index=parseInt(e,10),""):e];return e=>{let t={filename:e,index:0,isCompressed:!1};return a.reduce(((e,n)=>n(e,t)),e)?null:t}}},1129:(e,t,n)=>{e.exports={RollingFileWriteStream:n(2667),RollingFileStream:n(5814),DateRollingFileStream:n(4202)}},4777:(e,t,n)=>{const r=n(5753)("streamroller:moveAndMaybeCompressFile"),o=n(1605),i=n(3106);e.exports=async(e,t,n)=>{if(n=function(e){const t={mode:parseInt("0600",8),compress:!1},n=Object.assign({},t,e);return r(`_parseOption: moveAndMaybeCompressFile called with option=${JSON.stringify(n)}`),n}(n),e!==t){if(await o.pathExists(e))if(r(`moveAndMaybeCompressFile: moving file from ${e} to ${t} ${n.compress?"with":"without"} compress`),n.compress)await new Promise(((s,c)=>{let a=!1;const l=o.createWriteStream(t,{mode:n.mode,flags:"wx"}).on("open",(()=>{a=!0;const t=o.createReadStream(e).on("open",(()=>{t.pipe(i.createGzip()).pipe(l)})).on("error",(t=>{r(`moveAndMaybeCompressFile: error reading ${e}`,t),l.destroy(t)}))})).on("finish",(()=>{r(`moveAndMaybeCompressFile: finished compressing ${t}, deleting ${e}`),o.unlink(e).then(s).catch((t=>{r(`moveAndMaybeCompressFile: error deleting ${e}, truncating instead`,t),o.truncate(e).then(s).catch((t=>{r(`moveAndMaybeCompressFile: error truncating ${e}`,t),c(t)}))}))})).on("error",(e=>{a?(r(`moveAndMaybeCompressFile: error writing ${t}, deleting`,e),o.unlink(t).then((()=>{c(e)})).catch((e=>{r(`moveAndMaybeCompressFile: error deleting ${t}`,e),c(e)}))):(r(`moveAndMaybeCompressFile: error creating ${t}`,e),c(e))}))})).catch((()=>{}));else{r(`moveAndMaybeCompressFile: renaming ${e} to ${t}`);try{await o.move(e,t,{overwrite:!0})}catch(n){if(r(`moveAndMaybeCompressFile: error renaming ${e} to ${t}`,n),"ENOENT"!==n.code){r("moveAndMaybeCompressFile: trying copy+truncate instead");try{await o.copy(e,t,{overwrite:!0}),await o.truncate(e)}catch(e){r("moveAndMaybeCompressFile: error copy+truncate",e)}}}}}else r("moveAndMaybeCompressFile: source and target are the same, not doing anything")}},6301:e=>{e.exports=()=>new Date},1236:(e,t)=>{"use strict";t.S=function(e){return Object.defineProperty((function(){if("function"!=typeof arguments[arguments.length-1])return new Promise(((t,n)=>{arguments[arguments.length]=(e,r)=>{if(e)return n(e);t(r)},arguments.length++,e.apply(this,arguments)}));e.apply(this,arguments)}),"name",{value:e.name})},t.z=function(e){return Object.defineProperty((function(){const t=arguments[arguments.length-1];if("function"!=typeof t)return e.apply(this,arguments);e.apply(this,arguments).then((e=>t(null,e)),t)}),"name",{value:e.name})}},7035:(e,t)=>{"use strict";const{parse:n,stringify:r}=JSON,{keys:o}=Object,i=String,s="string",c={},a="object",l=(e,t)=>t,u=e=>e instanceof i?i(e):e,f=(e,t)=>typeof t===s?new i(t):t,p=(e,t,n,r)=>{const s=[];for(let l=o(n),{length:u}=l,f=0;f<u;f++){const o=l[f],u=n[o];if(u instanceof i){const i=e[u];typeof i!==a||t.has(i)?n[o]=r.call(n,o,i):(t.add(i),n[o]=c,s.push({k:o,a:[e,t,i,r]}))}else n[o]!==c&&(n[o]=r.call(n,o,u))}for(let{length:e}=s,t=0;t<e;t++){const{k:e,a:o}=s[t];n[e]=r.call(n,e,p.apply(null,o))}return n},d=(e,t,n)=>{const r=i(t.push(n)-1);return e.set(n,r),r},h=(e,t)=>{const r=n(e,f).map(u),o=r[0],i=t||l,s=typeof o===a&&o?p(r,new Set,o,i):o;return i.call({"":s},"",s)};t.parse=h;const y=(e,t,n)=>{const o=t&&typeof t===a?(e,n)=>""===e||-1<t.indexOf(e)?n:void 0:t||l,i=new Map,c=[],u=[];let f=+d(i,c,o.call({"":e},"",e)),p=!f;for(;f<c.length;)p=!0,u[f]=r(c[f++],h,n);return"["+u.join(",")+"]";function h(e,t){if(p)return p=!p,t;const n=o.call(this,e,t);switch(typeof n){case a:if(null===n)return n;case s:return i.get(n)||d(i,c,n)}return n}};t.stringify=y,t.toJSON=e=>n(y(e)),t.fromJSON=e=>h(r(e))}};